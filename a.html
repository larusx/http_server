<!DOCTYPE html>
<html>
<head>
<title>Cloud Storage</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />  
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
<link rel="shortcut icon" href="img/favicon.ico">
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script>
var socket=new WebSocket('ws://106.3.46.59:80');
socket.onopen=function(event){
	socket.send('来了一个人');
};	
socket.onclose=function(event){
	socket.send('走了一个人');
	console.log('close',event);
};
socket.onmessage=function(event){
	console.log('world',event);
	time=new Date();
	box=document.getElementById("talkbox");
	$("#result").append('<p style="font-size:20px;font-family:Microsoft Yahei,Consolas;">'+time.toLocaleTimeString()+'<br>'+event.data+'</p><hr>');
	box.scrollTop=box.scrollHeight;
};
$(document).ready(function(){
		$("#btn").click(function(){
			socket.send($("#txt").val());	
			$("#txt").val('');
			});
		});
$(document).ready(function(){
		$("#test").click(function(){
			$.post("/a.c",
				{name:"abc",city:"bj"},
				function(data,status){
				$("#result").append(data+status);
				});
			});
		});
</script>

</head>
<body style="background-image:url(img/index_back.jpg)">
<a href="https://github.com/larusx/http_server.git"><img style="position: fixed; top: 0; right: 0; border: 0;"src="img/joinus.png" alt="Join us on GitHub" /></a>
<div class="container-fluid">
<div class="row-fluid">
<div class="span6 offset3">
<div class="page-header">
<h1>
实时聊天 <small style="color:#FF0066">HTML5!</small>
</h1>
</div>
<form enctype="multipart/form-data" action="/" method="POST">  
上传文件:
<input type="file" multiple size="80" name="file1" id='f1'>  
<input type="submit" value="确定" >  
</form>
<textarea id="txt"></textarea>
<button class="btn btn-primary" id="btn">发送</button>
<button class="btn btn-info" id="clr">清空</button>
<h3>聊天窗口，按回车发送消息</h1>
<div id="talkbox" style="overflow:auto;height:300px;width:650px;background-color:#996699;color:#ffffff;border:2px solid #666666;padding:5px;">
<p id="result"></p>
</div>
</div>
</div>
</div>
<script>
$("#clr").click(function(){
			$('#result').text("");
		});
$(document).keyup(function(){
			if(event.keyCode == 13)
				$("#btn").trigger("click");
				$("#txt").focus();
		});
$(document).keypress(function(){
			$("#txt").focus();
		});
</script>
</body>
</html>

